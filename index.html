<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscribe Prototype</title>
    <!-- Include D3.js -->
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <!-- StyleSheets-->
    <link rel="stylesheet" href="styles/styles.css">
    <link rel="stylesheet" href="styles/topbar.css">
    <link rel="stylesheet" href="styles/mainweb.css">

    <!-- Scripts-->

    <script src="javascript/entryCreation.js"></script>
</head>

<body>

    <!-- Large title screen -->
    <div class="title-screen">
        <h1>Welcome to My Website</h1>
        <p>This is a brief description of what the website is about.</p>
    </div>

    <!-- Top navigation bar -->
    <div class="topnav">
        <a href="#home">Home</a>
        <a href="#about">About</a>
        <a href="#services">Services</a>
        <a href="#contact">Contact</a>
    </div>

    <div id="csv-container">


        <div id="main-web"></div>

        <div id="word-list">
            <!-- List of words goes here -->
            <h2>Sample Word List</h2>
            <ul>
                <li>Battle School</li>
                <li>Ender Wiggin</li>
                <li>Formic</li>
                <li>Command School</li>
                <li>Peter Wiggin</li>
                <li>Mazer Rackham</li>
                <li>Giant's Drink</li>
                <li>Third Invasion</li>
                <li>Dragon Army</li>
                <li>Valentine Wiggin</li>
                <li>The Mind Game</li>
                <li>Buggers</li>
                <li>The Battle Room</li>
                <li>Salamander Army</li>
                <li>Locke and Demosthenes</li>
                <li>IF (International Fleet)</li>
                <li>Bugger War</li>
                <li>Graff and Anderson</li>
                <li>Null Gravity</li>
                <li>Ender's Jeesh</li>

                <!-- Add more words as needed -->
            </ul>
        </div>
    </div>


    <script>
        // Create a function to handle keyboard shortcuts
        function handleKeyPress(event) {
            // Check if the key pressed is 'n' and either Ctrl (for Windows/Linux) or Command (for macOS) is pressed
            if ((event.key === 'b' || event.key === 'B') && (event.ctrlKey || event.metaKey)) {
                // Prevent default behavior of the browser (e.g., opening a new tab)
                event.preventDefault();

                var width = document.getElementById("main-web").width;
                var height = document.getElementById("main-web").height;
                console.log(width);
                console.log(height);

                // Create a new draggable group
                var userInput = prompt("Please enter some text:");
                if (userInput !== null) {
                    let entry = createDraggableEntry(svg, userInput);
                    entryArray.push(entry);
                    counterCreated++;

                } else {
                    alert("No input provided.");
                }
            }
        }

        // Listen for keydown events on the window
        window.addEventListener('keydown', handleKeyPress);
        // Data
        const data = [10, 20, 30, 40, 50];
        var width = document.getElementById("main-web").offsetWidth;
        var height = document.getElementById("main-web").offsetHeight;
        console.log(width);
        console.log(height);

        // Create SVG element
        const svg = d3.select("#main-web")
            .append("svg")
            .attr("width", width)
            .attr("height", height);

        const buttonGroup = svg.append("g")
            .attr("transform", "translate(10, 10)")
            .on("click", function () {
                // Prompt the user for text input
                var userInput = prompt("Please enter some text:");

                // Check if the user entered any text
                if (userInput !== null) {
                    // Display the user input
                    let entry = createDraggableEntry(svg, userInput);
                    entryArray.push(entry);
                    counterCreated++;
                } else {
                    // Handle case where user cancels the prompt
                    alert("No input provided.");
                }
            });

        buttonGroup.append("rect")
            .attr("width", 100)      // width of the rectangle
            .attr("height", 40)      // height of the rectangle
            .attr("fill", "gray")    // fill color of the rectangle
            .style("cursor", "pointer"); // change cursor to pointer on hover
        // Add click behavior


        // Append text to the group
        buttonGroup.append("text")
            .attr("x", 5) // x-coordinate of the text relative to the group
            .attr("y", 25) // y-coordinate of the text relative to the group
            .attr("font-size", "14px")
            .attr("fill", "white")
            .style("cursor", "pointer") // change cursor to pointer on hover
            .text("New Entry");

        const colorButtonGroup = svg.append("g")
            .attr("transform", "translate(10, 60)")
            .on("click", function () {
                console.log(selectedEntry);
                if (selectedEntry === -1) {
                    return;
                }

                const rect = d3.select("#" + selectedEntry).select("#innerBox"); // Select the rectangle by ID

                // Get the current stroke color
                const currentColor = rect.attr("stroke");

                // Determine the new stroke color based on the current color
                let newColor;
                switch (currentColor) {
                    case "black":
                        newColor = "red";
                        break;
                    case "red":
                        newColor = "green";
                        break;
                    case "green":
                        newColor = "blue";
                        break;
                    case "blue":
                        newColor = "orange";
                        break;
                    case "orange":
                        newColor = "purple";
                        break;
                    default:
                        newColor = "black"; // Default to black if the current color is not recognized
                }

                // Set the new stroke color
                rect.attr("stroke", newColor);
            });



        colorButtonGroup.append("rect")
            .attr("width", 120)      // width of the rectangle
            .attr("height", 80)      // height of the rectangle
            .attr("fill", "gray")    // fill color of the rectangle
            .style("cursor", "pointer"); // change cursor to pointer on hover
        // Add click behavior


        // Append text to the group
        colorButtonGroup.append("text")
            .attr("x", 5) // x-coordinate of the text relative to the group
            .attr("y", 25) // y-coordinate of the text relative to the group
            .attr("font-size", "14px")
            .attr("fill", "white")
            .style("cursor", "pointer") // change cursor to pointer on hover
            .text("Change Entry Color\n(5 Possible Colors)");

        colorButtonGroup.append("text")
            .attr("x", 5) // x-coordinate of the text relative to the group
            .attr("y", 55) // y-coordinate of the text relative to the group
            .attr("font-size", "14px")
            .attr("fill", "white")
            .style("cursor", "pointer") // change cursor to pointer on hover
            .text("(5 Possible Colors)");

        //array of all created entries
        entryArray = [];
        counterCreated = 0;
        selectedEntry = -1;

        function selectEntry(entryID) {
            entryArray.forEach(function (entry) {
                entry.select("#outerBox").attr("display", "none");
            });

            selectedEntry = entryID;
            d3.select("#" + entryID).select("#outerBox").attr("display", "block");

        }

    </script>
</body>

</html>